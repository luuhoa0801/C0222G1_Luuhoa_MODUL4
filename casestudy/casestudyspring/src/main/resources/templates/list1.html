<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Customer</title>
    <link rel="stylesheet" th:href="@{bootstrap/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{datatables/css/dataTables.bootstrap4.min.css}"/>
</head>
<body>
<div style="background-color: #20c997;border: 1px #4e555b solid;display: inline;padding: 5px;border-radius: 3px">
    <a href="/customer?action=add">Thêm mới Customer </a>
</div>
<a href="/customer" style="margin-left: 50px">Trang Customer </a>

<a href="http://localhost:8080" style="margin-left: 50px">Trang Chủ </a>

<a href="#"  data-toggle="modal" data-target="#search">
    Tìm kiếm
</a>

<table  id="tableCustomer" class="table table-striped table-bordered"
        border="2" style="border-collapse:  collapse;padding-top: 10px;width: 90%">
    <thead>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>BirthDay</th>
        <th>Gender</th>
        <th>IdCard</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Address</th>
        <th>status</th>
        <th>Chỉnh sửa</th>
    </tr>
    </thead>
    <tbody>

            <tr th:if="${customer.status == 0}" th:each="customer,loop : ${listCustomer}">
                <td th:text="${customer.customerId}"></td>
                <td th:text="${customer.customerName}"></td>
                <td th:text="${customer.customerBirthday}"></td>
                <td th:text="${customer.customerGender}"></td>
                <td th:text="${customer.customerIdCard}"></td>
                <td th:text="${customer.customerPhone}"></td>
                <td th:text="${customer.customerEmail}"></td>
                <td th:text="${customer.status}"></td>
                <td th:text="${customer.customerAddress}"></td>
                <td th:text="${customer.customerType.name}"></td>
                <td>
                    <a th:href="@{{id}/edit(id=${customer.id})}">edit</a>
                    <a href="#" onclick="customerIndex('${customer.customer_id}', '${customer.customer_name}') "
                       data-toggle="modal"
                       data-target="#delete">
                        Delete
                    </a>
                </td>
            </tr>
        </c:if>
    </c:forEach>
    </tbody>
</table>


<div class="modal" id="delete">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title w-100 text-center" id="name"></h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-dark" onclick="customerIndex2()">
                    <a class="text-white">Xóa</a>
                </button>
                <button type="button" class="btn btn-dark " data-dismiss="modal">Hủy</button>
            </div>
        </div>
    </div>
</div>
<!--<div class="modal" id="search">-->
<!--    <div class="modal-dialog">-->
<!--        <form action="/customer?action=search" method="post">-->
<!--            <div class="modal-content">-->
<!--                <div class="modal-header">-->
<!--                    <h4 class="modal-title w-100 text-center">Chọn thuốc tính bạn muốn tìm kiếm</h4>-->
<!--                    <button type="button" class="close" data-dismiss="modal"></button>-->
<!--                </div>-->
<!--                <div class="modal-body footer border-0">-->
<!--                    <input name="customerName" type="text" placeholder="Tên khách hàng" class="form-control">-->
<!--                    <select name="customerId" class="form-control custom-select bg-light">-->
<!--                        <option value=""  >Mã khách hàng</option>-->
<!--                        <th:each = "" >-->
<!--                            <option value="${customer.customer_id}"> ${customer.customer_id} </option>-->
<!--                        </th:each>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="modal-footer border-0">-->
<!--                    <button type="submit" class="btn btn-dark">-->
<!--                        Tìm kiếm-->
<!--                    </button>-->
<!--                </div>-->
<!--            </div>-->
<!--        </form>-->
<!--    </div>-->
<!--</div>-->

</body>
<script th:src="@{/jquery/jquery-3.5.1.min.js}"></script>
<script th:src="@{/datatables/js/jquery.dataTables.min.js}"></script>
<script th:src="@{/bootstrap/js/bootstrap.bundle.min.js}"></script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script>
    var customerId;

    function customerIndex(index, name) {

        customerId = index;
        document.getElementById("name").innerHTML = "bạn có muốn xóa không ? " +"\n" + name;
    };

    function customerIndex2() {

        link = "/customer?action=delete&customer_id=" + customerId;
        window.location.href = link;
    };
</script>

</html>
